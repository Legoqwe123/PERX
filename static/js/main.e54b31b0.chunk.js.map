{"version":3,"sources":["components/ui/badge.jsx","assests/icons/shopping-basket.svg","routes.js","components/ui/header.jsx","constants/api.js","store/slices/product.js","store/slices/cart.js","assests/icons/add.svg","assests/icons/minus.svg","components/ui/amount.jsx","components/Product/ui/product-item.jsx","components/Product/ui/product-list.jsx","context/dealers-context.js","pages/product.js","components/Product/product-page.jsx","components/ui/button-back.jsx","components/Cart/ui/cart-info.jsx","components/ui/button-close.jsx","components/Cart/ui/cart-item.jsx","components/Cart/ui/cart-list.jsx","pages/cart.js","components/Cart/cart-page.jsx","App.jsx","store/store.js","store/middleware/local-storage.js","index.js"],"names":["Badge","content","children","className","routes","Object","freeze","product","cart","Header","counterProductInCart","useSelector","state","reduce","acc","item","counter","to","src","cartIcon","width","height","alt","API_URL","createUrlAPI","path","Array","isArray","createUrlForStatic","indexLastSlash","lastIndexOf","slice","productSlice","createSlice","name","initialState","loading","error","products","reducers","fetchProductRequested","fetchProductSuccess","action","payload","fetchProductFailure","actions","cartSlice","addProduct","productIndexInCart","findIndex","itemCart","push","removeProduct","filter","setCart","_","updateProduct","removeProductFully","clearAll","Amount","handleClickAdd","handleClickRemove","value","disabled","handleChange","type","onClick","iconMinus","min","maxLength","onChange","e","target","iconPlus","ProductItem","productInCart","find","dispatch","useDispatch","handleClickButtonAdd","image","price","ProductList","map","DealersContext","createContext","useDealersContext","useContext","Product","dealers","productData","useEffect","a","fetchUrl","isEmpty","join","fetch","response","json","data","fetchProduct","ButtonBack","history","useHistory","classNames","goBack","CartInfo","totalSum","toFixed","setTimeout","ButtonClose","handleClick","iconAdd","CartItem","CartList","Cart","length","App","setCartOutLocalStorageAtInizializationApp","dataCartLocalStorage","JSON","parse","localStorage","getItem","productsByFilterDealers","intersectionBy","useLayoutEffect","component","exact","store","configureStore","reducer","combineReducers","middleware","thunk","next","result","includes","setItem","stringify","getState","window","app","startApp","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.e54b31b0.chunk.js","sourcesContent":["export const Badge = ({ content, children }) => {\n  return (\n    <div className=\"badge\">\n      {children}\n      <span className=\"badge-content\">{content}</span>\n    </div>\n  );\n};\n","export default __webpack_public_path__ + \"static/media/shopping-basket.7340c518.svg\";","export const routes = Object.freeze({\n  product: \"/\",\n  cart: \"/cart\",\n});\n","import { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport { Badge } from \"./badge\";\n\nimport cartIcon from \"../../assests/icons/shopping-basket.svg\";\nimport { routes } from \"../../routes\";\n\nexport const Header = () => {\n  const counterProductInCart = useSelector((state) =>\n    state.cart.reduce((acc, item) => acc + item.counter, 0)\n  );\n\n  return (\n    <header className=\"shop-header\">\n      <div className=\"shop-header__wrapper container-95\">\n        <p className=\"shop-header__text\">Интернет магазин</p>\n\n        <Link to={routes.cart}>\n          <Badge content={counterProductInCart}>\n            <img src={cartIcon} width=\"40\" height=\"40\" alt=\"Cart\" />\n          </Badge>\n        </Link>\n      </div>\n    </header>\n  );\n};\n","export const API_URL = \"https://murmuring-tor-81614.herokuapp.com/api\";\n\nexport const createUrlAPI = (path) => {\n  if (Array.isArray(path)) {\n    return path.reduce((acc, item) => acc + item, API_URL);\n  }\n\n  return API_URL + path;\n};\n\nexport const createUrlForStatic = (path) => {\n  const indexLastSlash = API_URL.lastIndexOf(\"/\");\n  const urlWithoutLastSlash = API_URL.slice(0, indexLastSlash);\n\n  return urlWithoutLastSlash + path;\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport isEmpty from \"lodash/isEmpty\";\n\nimport { createUrlAPI } from \"../../constants/api\";\n\nconst initialProductValues = {\n  loading: false,\n  error: {},\n  products: [],\n};\n\nexport const productSlice = createSlice({\n  name: \"product\",\n  initialState: initialProductValues,\n  reducers: {\n    fetchProductRequested(state) {\n      state.loading = true;\n    },\n    fetchProductSuccess(state, action) {\n      state.loading = false;\n      state.products = action.payload;\n    },\n    fetchProductFailure(state, action) {\n      state.error = action.payload;\n      state.error = false;\n    },\n  },\n});\n\nexport const actions = productSlice.actions;\n\nexport const fetchProduct = (dealers) => async (dispatch) => {\n  dispatch(actions.fetchProductRequested());\n\n  const fetchUrl = isEmpty(dealers)\n    ? createUrlAPI(\"/goods\")\n    : createUrlAPI([\"/goods\", `/?dealers=${dealers.join(\",\")}`]);\n\n  try {\n    const response = await fetch(fetchUrl);\n    const data = await response.json();\n\n    dispatch(actions.fetchProductSuccess(data));\n  } catch (error) {\n    dispatch(actions.fetchProductFailure(error));\n  }\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\n\nconst initialCartValues = [];\n\nexport const cartSlice = createSlice({\n  name: \"cart\",\n  initialState: initialCartValues,\n  reducers: {\n    addProduct(state, action) {\n      const productIndexInCart = state.findIndex(\n        (itemCart) => itemCart.name === action.payload.name\n      );\n\n      if (productIndexInCart >= 0) {\n        state[productIndexInCart].counter++;\n\n        return;\n      }\n\n      state.push({ ...action.payload, counter: 1 });\n    },\n\n    removeProduct(state, action) {\n      const productIndexInCart = state.findIndex(\n        (itemCart) => itemCart.name === action.payload.name\n      );\n\n      const shouldRemoveProduct = state[productIndexInCart].counter <= 1;\n\n      if (shouldRemoveProduct) {\n        return state.filter((product) => product.name !== action.payload.name);\n      }\n\n      state[productIndexInCart].counter--;\n    },\n\n    setCart(_, action) {\n      return action.payload;\n    },\n\n    updateProduct(state, action) {\n      const productIndexInCart = state.findIndex(\n        (itemCart) => itemCart.name === action.payload.name\n      );\n\n      state[productIndexInCart] = action.payload;\n    },\n\n    removeProductFully(state, action) {\n      return state.filter((product) => product.name !== action.payload.name);\n    },\n\n    clearAll() {\n      return [];\n    },\n  },\n});\n\nexport const actions = cartSlice.actions;\n","export default __webpack_public_path__ + \"static/media/add.c6f2e133.svg\";","export default __webpack_public_path__ + \"static/media/minus.7aa3be90.svg\";","import iconPlus from \"../../assests/icons/add.svg\";\nimport iconMinus from \"../../assests/icons/minus.svg\";\n\nexport const Amount = ({\n  handleClickAdd,\n  handleClickRemove,\n  value,\n  className,\n  disabled,\n  handleChange,\n}) => {\n  return (\n    <div className={`amount ${className}`}>\n      <button\n        type=\"button\"\n        onClick={handleClickRemove}\n        className=\"amount-button\">\n        <img\n          src={iconMinus}\n          width=\"20\"\n          height=\"20\"\n          alt=\"Plus\"\n          className=\"amount-image\"\n        />\n      </button>\n      <input\n        type=\"text\"\n        className=\"amount-value\"\n        disabled={disabled}\n        value={value}\n        min={1}\n        maxLength={3}\n        onChange={(e) => {\n          handleChange(e.target.value);\n        }}\n      />\n      <button type=\"button\" onClick={handleClickAdd} className=\"amount-button\">\n        <img\n          src={iconPlus}\n          width=\"20\"\n          height=\"20\"\n          alt=\"Minus\"\n          className=\"amount-image\"\n        />\n      </button>\n    </div>\n  );\n};\n","import { useDispatch, useSelector } from \"react-redux\";\n\nimport { createUrlForStatic } from \"../../../constants/api\";\nimport { actions } from \"../../../store/slices/cart\";\nimport { Amount } from \"../../ui/amount\";\n\nexport const ProductItem = ({ product }) => {\n  const productInCart = useSelector((state) =>\n    state.cart.find((item) => product.name === item.name)\n  );\n\n  const dispatch = useDispatch();\n\n  const handleClickButtonAdd = () => {\n    dispatch(actions.addProduct(product));\n  };\n\n  const handleClickButtonRemove = () => {\n    dispatch(actions.removeProduct(product));\n  };\n\n  return (\n    <li className=\"product__item\">\n      <img\n        src={createUrlForStatic(product.image)}\n        alt={product.name}\n        className=\"product__item-img\"\n        width=\"200\"\n        height=\"200\"\n      />\n      <p className=\"product__item-name\">{product.name}</p>\n      <p className=\"product__item-price\">{product.price} $</p>\n\n      {productInCart ? (\n        <Amount\n          value={productInCart.counter}\n          handleClickAdd={handleClickButtonAdd}\n          handleClickRemove={handleClickButtonRemove}\n          disabled\n        />\n      ) : (\n        <button\n          className=\"product__item-button\"\n          type=\"button\"\n          onClick={handleClickButtonAdd}>\n          Добавить в корзину\n        </button>\n      )}\n    </li>\n  );\n};\n","import { ProductItem } from \"./product-item\";\n\nexport const ProductList = ({ products }) => {\n  return (\n    <ul className=\"product__list\">\n      {products.map((product) => (\n        <ProductItem product={product} key={product.name} />\n      ))}\n    </ul>\n  );\n};\n","import { createContext, useContext } from \"react\";\n\nexport const DealersContext = createContext([]);\n\nexport const useDealersContext = () => useContext(DealersContext);\n","import { ProductPage } from \"../components/Product/product-page\";\n\nexport const Product = ProductPage;\n","import isEmpty from \"lodash/isEmpty\";\nimport { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport { fetchProduct } from \"../../store/slices/product\";\nimport { ProductList } from \"./ui/product-list\";\nimport { useDealersContext } from \"../../context/dealers-context\";\n\nexport const ProductPage = () => {\n  const { dealers } = useDealersContext();\n\n  const productData = useSelector((state) => {\n    return state.product;\n  });\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchProduct(dealers));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <section className=\"product container-95\">\n      {!isEmpty(productData.products) && isEmpty(productData.error) && (\n        <ProductList products={productData.products} />\n      )}\n    </section>\n  );\n};\n","import { useHistory } from \"react-router-dom\";\n\nexport const ButtonBack = ({ className }) => {\n  const history = useHistory();\n\n  const classNames = [\"button-back\", className];\n\n  return (\n    <button\n      type=\"button\"\n      className={classNames.join(\" \")}\n      onClick={history.goBack}>\n      Назад\n    </button>\n  );\n};\n","import { useSelector, useDispatch } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { routes } from \"../../../routes\";\nimport { actions } from \"../../../store/slices/cart\";\n\nexport const CartInfo = () => {\n  const dispatch = useDispatch();\n\n  const history = useHistory();\n\n  const totalSum = useSelector((state) =>\n    state.cart.reduce((acc, item) => acc + item.counter * item.price, 0)\n  );\n\n  const handleSumbit = () => {\n    setTimeout(() => {\n      dispatch(actions.clearAll());\n\n      history.push(routes.product);\n    }, 500);\n  };\n\n  return (\n    <div className=\"cart__info\">\n      <p className=\"cart__info-price\">\n        К оплате :<span>{totalSum.toFixed(2)}$</span>\n      </p>\n      <button\n        type=\"button\"\n        className=\"cart__info-button\"\n        onClick={handleSumbit}>\n        Оформить заказ\n      </button>\n    </div>\n  );\n};\n","import iconAdd from \"../../assests/icons/add.svg\";\n\nexport const ButtonClose = ({\n  height = 30,\n  width = 30,\n  className,\n  handleClick,\n}) => {\n  return (\n    <button\n      type=\"button\"\n      className={`button-close ${className}`}\n      onClick={handleClick}>\n      <img height={height} width={width} src={iconAdd} alt=\"Remove\" />\n    </button>\n  );\n};\n","import { useDispatch } from \"react-redux\";\n\nimport { createUrlForStatic } from \"../../../constants/api\";\nimport { actions } from \"../../../store/slices/cart\";\nimport { Amount } from \"../../ui/amount\";\nimport { ButtonClose } from \"../../ui/button-close\";\n\nexport const CartItem = ({ product }) => {\n  const dispatch = useDispatch();\n\n  const handleClickButtonAdd = () => {\n    dispatch(actions.addProduct(product));\n  };\n\n  const handleClickButtonRemove = () => {\n    dispatch(actions.removeProduct(product));\n  };\n\n  const handleClickButtonClose = () => {\n    dispatch(actions.removeProductFully(product));\n  };\n\n  const handleChange = (value) => {\n    if (value < 1000) {\n      dispatch(actions.updateProduct({ ...product, counter: +value }));\n    }\n  };\n\n  return (\n    <li className=\"cart__list-item\">\n      <div className=\"cart__item-left\">\n        <img\n          src={createUrlForStatic(product.image)}\n          alt={product.name}\n          className=\"cart__item-img\"\n          width=\"75\"\n          height=\"75\"\n        />\n        <p className=\"cart__item-name\"> {product.name}</p>\n      </div>\n      <div className=\"cart__item-right\">\n        <Amount\n          className=\"h-50\"\n          value={product.counter}\n          handleClickAdd={handleClickButtonAdd}\n          handleClickRemove={handleClickButtonRemove}\n          handleChange={handleChange}\n        />\n        <p className=\"cart__item-price\">{product.price} $</p>\n\n        <div>\n          <ButtonClose\n            className=\"cart__item-button-close\"\n            handleClick={handleClickButtonClose}\n          />\n        </div>\n      </div>\n    </li>\n  );\n};\n","import { useSelector } from \"react-redux\";\nimport { CartItem } from \"./cart-item\";\n\nexport const CartList = () => {\n  const cart = useSelector((state) => state.cart);\n\n  return (\n    <ul className=\"cart__list\">\n      {cart.map((product) => (\n        <CartItem product={product} key={product.name} />\n      ))}\n    </ul>\n  );\n};\n","import { CartPage } from \"../components/Cart/cart-page\";\n\nexport const Cart = CartPage;\n","import { useSelector } from \"react-redux\";\n\nimport { ButtonBack } from \"../ui/button-back\";\n\nimport { CartInfo } from \"./ui/cart-info\";\nimport { CartList } from \"./ui/cart-list\";\n\nexport const CartPage = () => {\n  const cart = useSelector((state) => state.cart);\n\n  return (\n    <section className=\"cart container-95\">\n      <ButtonBack />\n\n      <h2 className=\"cart__title\">Содержание заказа</h2>\n\n      {cart.length > 0 ? (\n        <>\n          <CartList />\n          <CartInfo />\n        </>\n      ) : (\n        <p>Корзина пуста</p>\n      )}\n    </section>\n  );\n};\n","import { useLayoutEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport isEmpty from \"lodash/isEmpty\";\nimport intersectionBy from \"lodash/intersectionBy\";\n\nimport { Header } from \"./components/ui/header\";\n\nimport { Product } from \"./pages/product\";\nimport { Cart } from \"./pages/cart\";\nimport { routes } from \"./routes\";\nimport { actions } from \"./store/slices/cart\";\nimport { useDealersContext } from \"./context/dealers-context\";\nimport { createUrlAPI } from \"./constants/api\";\n\nfunction App() {\n  const dispatch = useDispatch();\n  const { dealers } = useDealersContext();\n\n  const setCartOutLocalStorageAtInizializationApp = async () => {\n    const dataCartLocalStorage = JSON.parse(localStorage.getItem(\"cart\"));\n\n    if (dataCartLocalStorage && dataCartLocalStorage.length > 0) {\n      if (!isEmpty(dealers)) {\n        const response = await fetch(\n          createUrlAPI([\"/goods\", `/?dealers=${dealers.join(\",\")}`])\n        );\n\n        const products = await response.json();\n\n        const productsByFilterDealers = intersectionBy(\n          dataCartLocalStorage,\n          products,\n          \"name\"\n        );\n\n        dispatch(actions.setCart(productsByFilterDealers));\n\n        return;\n      }\n\n      dispatch(actions.setCart(dataCartLocalStorage));\n    }\n  };\n\n  useLayoutEffect(() => {\n    setCartOutLocalStorageAtInizializationApp();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return (\n    <Router>\n      <Header />\n      <Switch>\n        <Route path={routes.product} component={Product} exact />\n        <Route path={routes.cart} component={Cart} exact />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","import { combineReducers, configureStore } from \"@reduxjs/toolkit\";\nimport thunk from \"redux-thunk\";\n\nimport { productSlice } from \"./slices/product\";\nimport { cartSlice } from \"./slices/cart\";\nimport { localStorageMiddleware } from \"./middleware/local-storage\";\n\nexport const store = configureStore({\n  reducer: combineReducers({\n    product: productSlice.reducer,\n    cart: cartSlice.reducer,\n  }),\n  middleware: [thunk, localStorageMiddleware],\n});\n","export const localStorageMiddleware = (state) => (next) => (action) => {\n  const result = next(action);\n\n  if (result.type.includes(\"cart/\")) {\n    localStorage.setItem(\"cart\", JSON.stringify(state.getState().cart));\n  }\n\n  return result;\n};\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\n\nimport App from \"./App\";\nimport { DealersContext } from \"./context/dealers-context\";\nimport { store } from \"./store/store\";\n\nimport \"./assests/style/style.sass\";\n\nfunction startApp(dealers) {\n  ReactDOM.render(\n    <DealersContext.Provider value={dealers}>\n      <StrictMode>\n        <Provider store={store}>\n          <App />\n        </Provider>\n      </StrictMode>\n    </DealersContext.Provider>,\n    document.getElementById(\"root\")\n  );\n}\n\nwindow.app = {\n  startApp,\n};\n"],"sourceRoot":""}