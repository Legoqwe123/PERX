(this.webpackJsonpsad=this.webpackJsonpsad||[]).push([[0],{73:function(t,e,c){},74:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c(20),a=c.n(r),i=c(12),s=c(3),o=c(4),u=c(1),d=function(t){var e=t.content,c=t.children;return Object(u.jsxs)("div",{className:"badge",children:[c,Object(u.jsx)("span",{className:"badge-content",children:e})]})},l=c.p+"static/media/shopping-basket.7340c518.svg",j=Object.freeze({product:"/",cart:"/cart"}),b=c(14),m=c(13),h=Object(m.b)({name:"cart",initialState:[],reducers:{addProduct:function(t,e){var c=t.findIndex((function(t){return t.name===e.payload.name}));c>=0?t[c].counter++:t.push(Object(b.a)(Object(b.a)({},e.payload),{},{counter:1}))},removeProduct:function(t,e){var c=t.findIndex((function(t){return t.name===e.payload.name}));if(t[c].counter<=1)return t.filter((function(t){return t.name!==e.payload.name}));t[c].counter--},setCart:function(t,e){return e.payload},updateProduct:function(t,e){var c=t.findIndex((function(t){return t.name===e.payload.name}));t[c]=e.payload},removeProductFully:function(t,e){return t.filter((function(t){return t.name!==e.payload.name}))},clearAll:function(){return[]}}}),p=h.actions,f=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.cart.reduce((function(t,e){return t+e.counter}),0)}));return Object(n.useLayoutEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"));e&&e.length>0&&t(p.setCart(e))}),[]),Object(u.jsx)("header",{className:"shop-header",children:Object(u.jsxs)("div",{className:"shop-header__wrapper container-95",children:[Object(u.jsx)("p",{className:"shop-header__text",children:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u043c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(u.jsx)(i.b,{to:j.cart,children:Object(u.jsx)(d,{content:e,children:Object(u.jsx)("img",{src:l,width:"40",height:"40",alt:"Cart"})})})]})})},O=c(18),x=c.n(O),v=c(27),g=c.n(v),_=c(37),N="https://murmuring-tor-81614.herokuapp.com/api",y=function(t){return Array.isArray(t)?t.reduce((function(t,e){return t+e}),N):N+t},k=function(t){var e=N.lastIndexOf("/");return N.slice(0,e)+t},C=Object(m.b)({name:"product",initialState:{loading:!1,error:{},products:[]},reducers:{fetchProductRequested:function(t){t.loading=!0},fetchProductSuccess:function(t,e){t.loading=!1,t.products=e.payload},fetchProductFailure:function(t,e){t.error=e.payload,t.error=!1}}}),P=C.actions,w=c.p+"static/media/add.c6f2e133.svg",S=c.p+"static/media/minus.7aa3be90.svg",A=function(t){var e=t.handleClickAdd,c=t.handleClickRemove,n=t.value,r=t.className,a=t.disabled,i=t.handleChange;return Object(u.jsxs)("div",{className:"amount ".concat(r),children:[Object(u.jsx)("button",{type:"button",onClick:c,className:"amount-button",children:Object(u.jsx)("img",{src:S,width:"20",height:"20",alt:"Plus",className:"amount-image"})}),Object(u.jsx)("input",{type:"text",className:"amount-value",disabled:a,value:n,min:1,maxLength:3,onChange:function(t){i(t.target.value)}}),Object(u.jsx)("button",{type:"button",onClick:e,className:"amount-button",children:Object(u.jsx)("img",{src:w,width:"20",height:"20",alt:"Minus",className:"amount-image"})})]})},I=function(t){var e=t.product,c=Object(o.c)((function(t){return t.cart.find((function(t){return e.name===t.name}))})),n=Object(o.b)(),r=function(){n(p.addProduct(e))};return Object(u.jsxs)("li",{className:"product__item",children:[Object(u.jsx)("img",{src:k(e.image),alt:e.name,className:"product__item-img",width:"200",height:"200"}),Object(u.jsx)("p",{className:"product__item-name",children:e.name}),Object(u.jsxs)("p",{className:"product__item-price",children:[e.price," $"]}),c?Object(u.jsx)(A,{value:c.counter,handleClickAdd:r,handleClickRemove:function(){n(p.removeProduct(e))},disabled:!0}):Object(u.jsx)("button",{className:"product__item-button",type:"button",onClick:r,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})},F=function(t){var e=t.products;return Object(u.jsx)("ul",{className:"product__list",children:e.map((function(t){return Object(u.jsx)(I,{product:t},t.name)}))})},R=function(){var t=Object(o.c)((function(t){return t.product})),e=Object(o.b)();return Object(n.useEffect)((function(){var t;e(function(){var e=Object(_.a)(g.a.mark((function e(c){var n,r,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(P.fetchProductRequested()),n=x()(t)?y("/goods"):y(["/goods","?=".concat(t.join(","))]),e.prev=2,e.next=5,fetch(n);case 5:return r=e.sent,e.next=8,r.json();case 8:a=e.sent,c(P.fetchProductSuccess(a)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),c(P.fetchProductFailure(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(u.jsx)("section",{className:"product container-95",children:!x()(t.products)&&x()(t.error)&&Object(u.jsx)(F,{products:t.products})})},J=function(t){var e=t.className,c=Object(s.f)(),n=["button-back",e];return Object(u.jsx)("button",{type:"button",className:n.join(" "),onClick:c.goBack,children:"\u041d\u0430\u0437\u0430\u0434"})},E=function(){var t=Object(o.b)(),e=Object(s.f)(),c=Object(o.c)((function(t){return t.cart.reduce((function(t,e){return t+e.counter*e.price}),0)}));return Object(u.jsxs)("div",{className:"cart__info",children:[Object(u.jsxs)("p",{className:"cart__info-price",children:["\u041a \u043e\u043f\u043b\u0430\u0442\u0435 :",Object(u.jsxs)("span",{children:[c.toFixed(2),"$"]})]}),Object(u.jsx)("button",{type:"button",className:"cart__info-button",onClick:function(){setTimeout((function(){t(p.clearAll()),e.push(j.product)}),500)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})},$=function(t){var e=t.height,c=void 0===e?30:e,n=t.width,r=void 0===n?30:n,a=t.className,i=t.handleClick;return Object(u.jsx)("button",{type:"button",className:"button-close ".concat(a),onClick:i,children:Object(u.jsx)("img",{height:c,width:r,src:w,alt:"Remove"})})},q=function(t){var e=t.product,c=Object(o.b)();return Object(u.jsxs)("li",{className:"cart__list-item",children:[Object(u.jsxs)("div",{className:"cart__item-left",children:[Object(u.jsx)("img",{src:k(e.image),alt:e.name,className:"cart__item-img",width:"75",height:"75"}),Object(u.jsxs)("p",{className:"cart__item-name",children:[" ",e.name]})]}),Object(u.jsxs)("div",{className:"cart__item-right",children:[Object(u.jsx)(A,{className:"h-50",value:e.counter,handleClickAdd:function(){c(p.addProduct(e))},handleClickRemove:function(){c(p.removeProduct(e))},handleChange:function(t){t<1e3&&c(p.updateProduct(Object(b.a)(Object(b.a)({},e),{},{counter:+t})))}}),Object(u.jsxs)("p",{className:"cart__item-price",children:[e.price," $"]}),Object(u.jsx)("div",{children:Object(u.jsx)($,{className:"cart__item-button-close",handleClick:function(){c(p.removeProductFully(e))}})})]})]})},B=function(){var t=Object(o.c)((function(t){return t.cart}));return Object(u.jsx)("ul",{className:"cart__list",children:t.map((function(t){return Object(u.jsx)(q,{product:t},t.name)}))})},L=function(){var t=Object(o.c)((function(t){return t.cart}));return Object(u.jsxs)("section",{className:"cart container-95",children:[Object(u.jsx)(J,{}),Object(u.jsx)("h2",{className:"cart__title",children:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),t.length>0?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(B,{}),Object(u.jsx)(E,{})]}):Object(u.jsx)("p",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"})]})},M=c(9),z=c(17),T=Object(m.a)({reducer:Object(M.b)({product:C.reducer,cart:h.reducer}),middleware:[z.a,function(t){return function(e){return function(c){var n=e(c);return n.type.includes("cart/")&&localStorage.setItem("cart",JSON.stringify(t.getState().cart)),n}}}]});var D=function(){return Object(u.jsx)(o.a,{store:T,children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(f,{}),Object(u.jsxs)(s.c,{children:[Object(u.jsx)(s.a,{path:j.product,component:R,exact:!0}),Object(u.jsx)(s.a,{path:j.cart,component:L,exact:!0})]})]})})},G=Object(n.createContext)([]);c(73);window.app={startApp:function(t){a.a.render(Object(u.jsx)(G.Provider,{value:t,children:Object(u.jsx)(n.StrictMode,{children:Object(u.jsx)(D,{})})}),document.getElementById("root"))}}}},[[74,1,2]]]);
//# sourceMappingURL=main.e10d85ae.chunk.js.map